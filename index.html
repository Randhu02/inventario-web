<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Ceres Peru SAC - Inventario</title>
    <link rel="stylesheet" href="estilos.css">
    
    <!-- Firebase v9 compact -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    
    <!-- Librer√≠a para exportar a Excel -->
    <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
</head>
<body>

<!-- PANTALLA DE INICIO - ELIGE MODO -->
<div id="inicioContainer" style="display: flex;">
    <div class="modo-container">
        <div class="modo-box">
            <h2>Ceres Peru SAC - Inventario</h2>
            
            <div class="modo-opcion">
                <h3>üëÅÔ∏è Modo Vista</h3>
                <p>Solo para consultar el inventario. No se requiere login.</p>
                <button id="btnModoVista" class="btn-modo-vista">Entrar como Visitante</button>
            </div>
            
            <div class="separador">
                <span>O</span>
            </div>
            
            <div class="modo-opcion">
                <h3>üîß Modo Administrador</h3>
                <p>Para agregar o eliminar registros. Requiere usuario y contrase√±a.</p>
                <button id="btnModoAdmin" class="btn-modo-admin">Iniciar como Administrador</button>
            </div>
        </div>
    </div>
</div>

<!-- FORMULARIO DE LOGIN (solo para modo admin) -->
<div id="loginContainer" class="login-container" style="display: none;">
    <div class="login-box">
        <h2>Acceso Administrador</h2>
        <p>Ingresa tus credenciales para modificar el inventario.</p>
        
        <form id="loginForm">
            <input type="email" id="loginEmail" placeholder="Correo electr√≥nico" required>
            <input type="password" id="loginPassword" placeholder="Contrase√±a" required>
            <button type="submit">Iniciar Sesi√≥n</button>
        </form>
        
        <div id="loginError" class="error-message" style="display: none;"></div>
        
        <div class="login-options">
            <button id="btnVolverInicio" class="btn-volver">‚Üê Volver a inicio</button>
        </div>
    </div>
</div>

<!-- APLICACI√ìN PRINCIPAL -->
<div id="mainContainer" class="container" style="display: none;">

    <!-- Barra superior con info del modo -->
    <div class="user-bar">
        <div>
            <span id="userEmail">Modo: Visitante (Solo lectura)</span>
            <span id="modoInfo"></span>
        </div>
        <div>
            <button id="btnCambiarModo" class="btn-cambiar">Cambiar Modo</button>
            <button id="btnLogout" style="display: none;">Cerrar Sesi√≥n</button>
        </div>
    </div>

    <h1>Ceres Peru SAC - Inventario</h1>

    <!-- FORMULARIO DE INVENTARIO (solo visible en modo admin) -->
    <div id="formContainer" style="display: none;">
        <h2>Agregar Nuevo Registro</h2>
        <form id="formInventario">
            <label>Descripci√≥n:</label>
            <select id="descripcion" required>
                <option value="">Seleccione</option>
                <option>UREA FERTI * 50 KG.</option>
                <option>FOSFATO DIAMONICO FERTI * 50 KG.</option>
                <option>SULFATO DE AMONIO FERTI * 50 KG.</option>
                <option>ADITIVO MARRON - BOLSAS * 20 KG.</option>
                <option>NITRATO DE AMONIO * 50 KG.</option>
                <option>NITRATO DE AMONIO * 50 KG. - POLIPROPILENO</option>
                <option>CLORURO DE POTASIO *50 KG.</option>
                <option>NITRO S PREMIUM AMARILLO * 50 KG</option>
                <option>SUPER BLUE * 50 KG</option>
                <option>NPK 20-20-20 * 50 KG</option>
                <option>PAPA SIERRA * 50 KG</option>
            </select>

            <label>Fecha:</label>
            <input type="date" id="fecha" required>

            <label>Operaci√≥n:</label>
            <input type="text" id="operacion" placeholder="Ej: Ingreso de almac√©n" required>

            <label>Ingreso:</label>
            <input type="number" id="ingreso" value="0" min="0">

            <label>Salida:</label>
            <input type="number" id="salida" value="0" min="0">

            <label>Observaciones:</label>
            <textarea id="observaciones" placeholder="Observaciones adicionales (opcional)" rows="3"></textarea>

            <button type="submit">Agregar Registro</button>
        </form>
    </div>

    <!-- MOSTRAR TABLA (visible para todos) -->
    <div class="bloque">
        <h3>Consultar Inventario</h3>
        
        <div id="infoModo">
            <!-- Mensaje din√°mico seg√∫n el modo -->
        </div>

        <select id="productoFiltro">
            <option value="">Seleccione un producto</option>
            <option>UREA FERTI * 50 KG.</option>
            <option>FOSFATO DIAMONICO FERTI * 50 KG.</option>
            <option>SULFATO DE AMONIO FERTI * 50 KG.</option>
            <option>ADITIVO MARRON - BOLSAS * 20 KG.</option>
            <option>NITRATO DE AMONIO * 50 KG.</option>
            <option>NITRATO DE AMONIO * 50 KG. - POLIPROPILENO</option>
            <option>CLORURO DE POTASIO *50 KG.</option>
            <option>NITRO S PREMIUM AMARILLO * 50 KG</option>
            <option>SUPER BLUE * 50 KG</option>
            <option>NPK 20-20-20 * 50 KG</option>
            <option>PAPA SIERRA * 50 KG</option>
        </select>

        <button type="button" id="btnMostrar">Mostrar Tabla</button>
    </div>

    <div id="contenedorTablas"></div>

    <!-- TABLA RESUMEN -->
    <div class="bloque">
        <div class="resumen-header">
            <h3>STOCK DE ENVASES VACIOS CERES PER√ö</h3>
            <button id="btnExportarExcel" class="btn-excel">üìä Exportar a Excel</button>
        </div>
        
        <p>Resumen de stock actualizado de todos los productos</p>
        
        <div id="tablaResumenContainer">
            <p>Cargando resumen de stock...</p>
        </div>
    </div>

</div>

<script src="codigo-firebase.js"></script>

</body>
</html>





